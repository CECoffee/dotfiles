---
- name: Install polybar deps
  package: name={{item}} state=present
  with_items:
    - wireless_tools
  become: True

- name: Install polybar
  packer: name={{item}} state=present
  with_items:
    - siji-git
    - polybar-git

- name: Create polybar conf dir
  file: path=~/.config/polybar state=directory

- name: Add pkg check script
  copy: src=files/pkg.sh dest=~/.config/polybar/pkg.sh

- name: Template launch file
  template: src=templates/launch.j2 dest=~/.config/polybar/launch.sh mode=0755

- name: Template config file
  template: src=templates/config.j2 dest=~/.config/polybar/config

- name: Configure i3lock blur
  lineinfile:
    path: ~/.i3/i3lock-fancy-multimonitor/lock
    regexp: '^BLURTYPE="2x8"'
    line: '#BLURTYPE="2x8"'
  ignore_errors: True

- name: Configure i3lock blur bis
  lineinfile:
    path: ~/.i3/i3lock-fancy-multimonitor/lock
    regexp: '^#BLURTYPE="5x3"'
    line: 'BLURTYPE="5x3"'
  ignore_errors: True
